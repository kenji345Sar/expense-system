
# 画面仕様書：出張旅費 編集画面

---

## 基本情報

- **画面名**：出張旅費 編集画面
- **URL**：`/expenses/business_trip/{id}/edit`
- **HTTP メソッド**：GET
- **Controller**：`BusinessTripController@edit`
- **Blade テンプレート**：`resources/views/business_trip/edit.blade.php`
- **渡すデータ**：
    - 指定IDの `expenses` レコード（expense_type = 'business_trip'）
    - 対応する `business_trip_expenses` 明細

---

## 編集可能条件

- ステータスが `draft`（下書き）の場合のみ編集可
- それ以外はエラー表示またはリダイレクト

---

## 編集項目（新規作成と同様）

| 項目         | 編集可否 | 備考                          |
| ------------ | -------- | ----------------------------- |
| 出張日       | ○        |                              |
| 出発地       | ○        |                              |
| 目的地       | ○        |                              |
| 目的         | ○        |                              |
| 金額         | ○        |                              |
| 領収書添付   | 再添付可 |                              |
| 備考         | ○        | 任意                          |

---

## ボタン一覧

| ボタン名 | 機能                             | 備考                    |
| -------- | -------------------------------- | ----------------------- |
| 明細追加 | 明細行を追加                     | JavaScript動作          |
| 明細削除 | 任意の明細行を削除               | JavaScript動作          |
| 保存     | 入力データをPUTで更新            | バリデーションあり      |
| 削除     | レコードを論理削除（オプション） | 権限と設定により表示    |
| 戻る     | 一覧画面（`/expenses/business_trip`）に戻る |                 |

---

## 認証・権限

| ロール         | 編集可能条件                     |
| -------------- | -------------------------------- |
| 一般ユーザー   | 自分の下書きデータのみ編集可     |
| 管理者         | 全件編集可（条件付き）           |

---

## 備考

- 編集画面は詳細表示を兼ねる
- ファイル添付がある場合、既存ファイルの表示または再添付欄を表示
