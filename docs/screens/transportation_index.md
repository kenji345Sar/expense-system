# 画面仕様書：交通費一覧画面

---

## 基本情報

- **画面名**：交通費一覧画面
- **URL**：`/expenses/transportation`
- **HTTPメソッド**：GET
- **Controller**：`TransportationExpenseController@index`
- **Bladeテンプレート**：`resources/views/transportation_expenses/index.blade.php`
- **渡すデータ**：
  - ログインユーザー情報（`auth()` により取得）
  - 該当ユーザーまたは全件の交通費データ（ロールに応じて）
  - 各レコードの合計金額・ステータス・明細行（1:N 関連）

---

## 表示項目

| 項目           | 説明                     |
|----------------|--------------------------|
| 利用日         | 明細のうち代表となる日付（または最初の行） |
| 出発地／到着地 | 複数明細ある場合は「-」などで簡略表示     |
| 経路           | 上に同じ                 |
| 金額合計       | 明細の合算額              |
| ステータス     | 下書き／申請中／承認済 など           |
| 操作ボタン     | 編集／申請ボタンなど（状況により表示制御）|

---

## ボタン／機能一覧

| ボタン名     | 機能                                       | 備考                          |
|--------------|--------------------------------------------|-------------------------------|
| 新規作成     | `/expenses/transportation/create` に遷移   | 明細追加画面へ                |
| 編集         | `/expenses/transportation/{id}/edit` に遷移 | 編集画面（下書きまたは差戻のみ） |
| 申請         | POST で申請処理実行                        | バリデーション付き             |
| CSV出力      | CSV形式で一覧データをダウンロード          | 「申請済」または「承認済」のみ対象 |

---

## 明細の扱い

- **1:多（expenses ↔ transportation_expenses）**
- 一覧では「合算表示」または「代表行のみ」表示
- 詳細確認や編集時にすべての明細を展開表示

---

## 認証・権限

- **ログイン必須**：Laravel Breeze により `auth` ミドルウェアを適用
- **表示制御**：
  - 一般ユーザー：自身の申請のみ表示・操作可能
  - 管理者ユーザー：全ユーザーの申請を表示・CSV出力可能

---

## 備考

- 全カテゴリで共通設計予定のため、一覧用コンポーネントや共通Blade化を検討
- CSV出力はリクエストパラメータに応じてフィルタ可能（例：`?status=approved`）

