# 画面仕様書：備品・消耗品費一覧画面

---

## 基本情報

- 画面名：備品・消耗品費一覧画面
- URL：`/expenses/supplies`
- HTTPメソッド：GET
- Controller：`SuppliesExpenseController@index`
- Blade：`resources/views/supplies_expenses/index.blade.php`
- 渡すデータ：
  - ログインユーザー情報
  - 該当ユーザーの expenses（expense_type='supplies'）
  - supplies_expenses 明細（備品名・数量・金額など）
  - ステータス、合計金額

---

## 使用テーブル

| テーブル名             | 用途                                      |
|------------------------|-------------------------------------------|
| `expenses`             | 共通情報（ユーザー、日付、金額、ステータス） |
| `supplies_expenses`    | 明細情報（品目・数量・金額など）             |
| `users`                | ログインユーザー情報                       |

---

## 表示項目

| 項目       | 説明                        |
|------------|-----------------------------|
| 購入日     | 明細日付                     |
| 品名       | 備品名・品目                 |
| 数量       | 数値表示                     |
| 金額合計   | 明細合算                     |
| ステータス | 下書き／申請中／承認済        |
| 操作       | 編集・申請・承認・CSV出力等     |

---

## ボタン・機能

| ボタン名   | 機能                                      | 備考               |
|------------|-------------------------------------------|--------------------|
| 新規作成   | `/expenses/supplies/create` に遷移         | 初期1明細で表示開始     |
| 編集       | draft のみ可                               |                    |
| 申請       | 明細必須・バリデーションあり                 |                    |
| 承認       | 承認者のみ・submitted 限定                  |                    |
| CSV出力    | `submitted`, `approved` 限定出力対象        |                    |

---

## 認証・権限

| ロール            | 表示対象           | 操作内容                 |
|-------------------|--------------------|--------------------------|
| 一般ユーザー        | 自分の申請           | 新規・編集・申請・CSV出力可能 |
| 承認者（is_approver） | 承認対象データ（申請中） | 承認実行可能               |
| 管理者（is_admin）   | 全データ             | 全件出力、編集補助            |

---

## ステータス

| コード       | 表示名   |
|--------------|----------|
| `draft`      | 下書き   |
| `submitted`  | 申請中   |
| `approved`   | 承認済   |

---
