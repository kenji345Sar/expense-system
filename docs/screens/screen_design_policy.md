# 一覧・新規作成画面に関する構成整理方針

---

## 目的

本ドキュメントは、経費精算システムにおける「一覧画面」と「新規作成画面」の共通化方針を明確化し、今後の設計・実装の一貫性を保つことを目的とします。

---

## 一覧画面の構成方針（カテゴリ別に分離）

### ❌ 共通化は行わない理由

- カテゴリごとに表示カラムが異なる（交通費は出発地・到着地、備品は品名・数量など）
- ステータスに応じた「操作ボタン表示」がカテゴリで異なる（承認要否など）
- CSV出力仕様もカテゴリ別で要件が異なる
- ユーザー権限による表示制御やロジックが複雑化しやすい

### ✅ 採用する方針

- 一覧画面は以下のようにカテゴリごとに個別ファイルを維持
  - `transportation_index.md`
  - `business_trip_index.md`
  - `entertainment_index.md`
  - `supplies_index.md`
- 表示・操作要件の違いはそれぞれの仕様書に明記
- 「全体一覧画面（/expenses/all）」のみ統合表示として別管理

---

## 新規作成画面の構成方針（共通化を維持）

### ✅ 共通化を行う理由

- 全カテゴリで使用する項目構成が類似（明細＋添付＋備考）
- カテゴリごとの差異は「明細の種類・バリデーション」のみ
- Bladeは共通 (`create.blade.php`)、ControllerとValidationで分岐
- 保守性と実装負荷のバランスが良好

### 補足構成

- `create_expense_shared.md` を中心に画面仕様を管理
- カテゴリごとの差異は「表示項目・バリデーションルール」としてセクション分離
- 必要に応じてカテゴリ別補助資料（例：`create_expense_business_trip.md`）を一時的に作成可

---

## 今後の実装・仕様策定の指針

| 項目             | 方針                          |
|------------------|-------------------------------|
| 一覧表示         | カテゴリ別Blade・Controller   |
| 新規作成フォーム | 共通Blade（typeによる分岐）    |
| 編集画面         | 新規作成と同じ構成（共通）     |
| 承認画面         | 一覧 or 編集から派生実装       |
| CSV出力          | 各カテゴリに応じた個別処理     |

---

## 備考

- 一覧画面はUI設計・操作性・処理要件がカテゴリ間で大きく異なるため共通化によるメリットが少なく、個別管理が最適
- 新規作成画面は全体設計が統一しやすく、共通化による開発効率向上が期待できる

---
